  ADDR B1 B2 B3 B4 C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE       1

                   *DECLARACION CONSTANTES

                   SCDR   EQU   $102F
                   SCCR2  EQU   $102D
                   SCSR   EQU   $102E
                   SCCR1  EQU   $102C
                   BAUD   EQU   $102B
                   HPRIO  EQU   $103C
                   SPCR   EQU   $1028
                   CSCTL  EQU   $105D
                   OPT2   EQU   $1038
                   PORTG  EQU   $1002
                   DDRA   EQU   $1001
                   DDRD   EQU   $1009
                   DDRG   EQU   $1003

                   *DECLARACION DE VARIABLES

                   ORDEN EQU  $0000
                   TEMP_H EQU $0001
                   TEMP  EQU  $0002
                   U     EQU  $0010
                   D     EQU  $0011
                   C     EQU  $0012
                   UM    EQU  $0013
                   CONT  EQU  $0020
                   FED   EQU  $0021
                   FER   EQU  $0022
                   FCD   EQU  $0023
                   FCR   EQU  $0024
                   CONT_M EQU $0025
                   CONT_D EQU $0026
                   CONT_C EQU $0027
                   CONT_L EQU $0028
                   CONT_X EQU $0029
                   CONT_V EQU $002A
                   CONT_I EQU $002B
                   U_R    EQU  $002C
                   D_R    EQU  $002D
                   C_R    EQU  $002E
                   UM_R   EQU  $002F

                   *PROGRAMA

                         ORG $8000

  8000 8E 00 FF          LDS #$00FF
  8003 BD 84 06          JSR SERIAL

                   LIMPIA
  8006 7F 00 00          CLR ORDEN
  8009 7F 00 01          CLR TEMP_H
  800C 7F 00 02          CLR TEMP
  800F 7F 00 10          CLR U
  8012 7F 00 11          CLR D
  8015 7F 00 12          CLR C
  8018 7F 00 13          CLR UM
  801B 7F 00 2C          CLR U_R
  801E 7F 00 2D          CLR D_R
  8021 7F 00 2E          CLR C_R
  8024 7F 00 2F          CLR UM_R
  8027 7F 00 20          CLR CONT
  802A 7F 00 21          CLR FED
  802D 7F 00 22          CLR FER
  8030 7F 00 23          CLR FCD
  ADDR B1 B2 B3 B4 C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE       2

  8033 7F 00 24          CLR FCR
  8036 7F 00 25          CLR CONT_M
  8039 7F 00 26          CLR CONT_D
  803C 7F 00 27          CLR CONT_C
  803F 7F 00 28          CLR CONT_L
  8042 7F 00 29          CLR CONT_X
  8045 7F 00 2A          CLR CONT_V
  8048 7F 00 2B          CLR CONT_I
  804B CE 00 00          LDX #0
  804E 18 CE 00 00       LDY #0
  8052 BD 84 31          JSR BORRA_TODO

                   INICIO

  8055 86 3F             LDAA #'?
  8057 97 00             STAA ORDEN
                   CICLO
  8059 96 00             LDAA ORDEN
  805B 81 3F             CMPA #'?
  805D 27 FA             BEQ  CICLO

  805F BD 84 A3          JSR DECIMAL
  8062 D6 23             LDAB FCD
  8064 C1 01             CMPB #1
  8066 27 4D             BEQ STORE_DECIMAL
  8068 BD 84 78          JSR ROMANO
  806B D6 24             LDAB FCR
  806D C1 01             CMPB #1
  806F 27 03             BEQ STORE_ROMANO
  8071 BD 84 61          JSR MENSAJE_ERROR_SIMBOLO

                   STORE_ROMANO
  8074 CE 01 70          LDX #$0170
  8077 A7 00             STAA $0,X
  8079 08                INX
  807A 7C 00 02          INC TEMP
                   RELOAD_DATA_ROMANO
  807D 86 3F             LDAA #'?
  807F 97 00             STAA ORDEN
                   CICLO_GUARDADO_ROMANO
  8081 96 00             LDAA ORDEN
  8083 81 3F             CMPA #'?
  8085 27 FA             BEQ CICLO_GUARDADO_ROMANO
  8087 81 3D             CMPA #'=
  8089 27 18             BEQ REVISA_21
  808B D6 02             LDAB TEMP
  808D C1 21             CMPB #$21
  808F 27 59             BEQ IMPRIME_ERROR_MAX_DECIMAL
  8091 BD 84 78          JSR ROMANO
  8094 D6 22             LDAB FER
  8096 C1 00             CMPB #0
  8098 26 4A             BNE IMPRIME_ERROR_SIMBOLO
  809A A7 00             STAA $0,X
  809C 08                INX
  809D 7C 00 02          INC TEMP
  80A0 7E 80 7D          JMP RELOAD_DATA_ROMANO

                   REVISA_21
  80A3 CE 00 00          LDX #0
  80A6 96 02             LDAA TEMP
  80A8 81 21             CMPA #$21
  80AA 23 06             BLS R2D_TEMP
  80AC BD 84 4A          JSR MENSAJE_ERROR_MAX
  80AF 7E 81 B0          JMP ESPERA_OK

  ADDR B1 B2 B3 B4 C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE       3

                   R2D_TEMP
  80B2 7E 81 CD          JMP R2D

                   STORE_DECIMAL
  80B5 CE 00 03          LDX #3
  80B8 A7 10             STAA $10,X
  80BA 09                DEX
  80BB 7C 00 02          INC TEMP
                   RELOAD_DATA_DECIMAL
  80BE 86 3F             LDAA #'?
  80C0 97 00             STAA ORDEN
                   CICLO_GUARDADO_DECIMAL
  80C2 96 00             LDAA ORDEN
  80C4 81 3F             CMPA #'?
  80C6 27 FA             BEQ CICLO_GUARDADO_DECIMAL
  80C8 81 3D             CMPA #'=
  80CA 27 24             BEQ REVISA_CUATRO
  80CC D6 02             LDAB TEMP
  80CE C1 04             CMPB #4
  80D0 27 18             BEQ IMPRIME_ERROR_MAX_DECIMAL
  80D2 BD 84 A3          JSR DECIMAL
  80D5 D6 21             LDAB FED
  80D7 C1 00             CMPB #0
  80D9 26 09             BNE IMPRIME_ERROR_SIMBOLO
  80DB A7 10             STAA $10,X
  80DD 09                DEX
  80DE 7C 00 02          INC TEMP
  80E1 7E 80 BE          JMP RELOAD_DATA_DECIMAL

                   IMPRIME_ERROR_SIMBOLO
  80E4 BD 84 61          JSR MENSAJE_ERROR_SIMBOLO
  80E7 7E 81 B0          JMP ESPERA_OK

                   IMPRIME_ERROR_MAX_DECIMAL
  80EA BD 84 4A          JSR MENSAJE_ERROR_MAX
  80ED 7E 81 B0          JMP ESPERA_OK

                   REVISA_CUATRO
  80F0 CE 00 00          LDX #0
  80F3 96 02             LDAA TEMP
  80F5 81 04             CMPA #4
  80F7 23 06             BLS D2R
  80F9 BD 84 4A          JSR MENSAJE_ERROR_MAX
  80FC 7E 81 B0          JMP ESPERA_OK

                   *** Convierte decimal a romano ***
                   D2R

  80FF 96 02             LDAA TEMP
  8101 81 03             CMPA #3
  8103 27 36             BEQ ACOMODA3
  8105 81 02             CMPA #2
  8107 27 55             BEQ ACOMODA2
  8109 81 01             CMPA #1
  810B 27 71             BEQ ACOMODA1

  810D 96 13             LDAA UM
  810F A7 80             STAA $80,X
  8111 96 12             LDAA C
  8113 A7 81             STAA $81,X
  8115 96 11             LDAA D
  8117 A7 82             STAA $82,X
  8119 96 10             LDAA U
  811B A7 83             STAA $83,X
  811D 86 3D             LDAA #'=
  ADDR B1 B2 B3 B4 C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE       4

  811F A7 84             STAA $84,X
  8121 96 02             LDAA TEMP
  8123 4C                INCA
  8124 97 02             STAA TEMP
  8126 DE 01             LDX TEMP_H

  8128 D6 13             LDAB UM
  812A C1 1E             CMPB #30
  812C 27 67             BEQ MD

                   UMCICLO
  812E 86 4D             LDAA #'M
  8130 BD 84 B7          JSR DATARX
  8133 5A                DECB
  8134 C1 30             CMPB #$30
  8136 27 5D             BEQ MD
  8138 7E 81 2E          JMP UMCICLO

                   ACOMODA3
  813B 86 3D             LDAA #'=
  813D A7 83             STAA $83,X
                         *** Baja decena a unidad ***
  813F 96 11             LDAA D
  8141 97 10             STAA U
  8143 A7 82             STAA $82,X
                         *** Baja centena a decena ***
  8145 96 12             LDAA C
  8147 97 11             STAA D
  8149 A7 81             STAA $81,X
                         *** Baja la unidad de millar por centena ***
  814B 96 13             LDAA UM
  814D 97 12             STAA C
  814F A7 80             STAA $80,X
  8151 7F 00 13          CLR UM
  8154 96 02             LDAA TEMP
  8156 4C                INCA
  8157 97 02             STAA TEMP
  8159 DE 01             LDX TEMP_H
  815B 7E 81 95          JMP MD

                   ACOMODA2
  815E 86 3D             LDAA #'=
  8160 A7 82             STAA $82,X
                         *** Baja centena a unidad ***
  8162 96 12             LDAA C
  8164 97 10             STAA U
  8166 A7 81             STAA $81,X
                         *** Baja unidad de millar a decena ***
  8168 96 13             LDAA UM
  816A 97 11             STAA D
  816C A7 80             STAA $80,X
                         *** Limpia datos ***
  816E 7F 00 12          CLR C
  8171 7F 00 13          CLR UM
  8174 96 02             LDAA TEMP
  8176 4C                INCA
  8177 97 02             STAA TEMP
  8179 DE 01             LDX TEMP_H
  817B 7E 81 9E          JMP MD2

                   ACOMODA1
  817E 86 3D             LDAA #'=
  8180 A7 81             STAA $81,X
                         *** Baja unidad de millar a unidad ***
  8182 96 13             LDAA UM
  ADDR B1 B2 B3 B4 C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE       5

  8184 97 10             STAA U
  8186 A7 80             STAA $80,X
                         *** Limpia datos ***
  8188 7F 00 13          CLR UM
  818B 96 02             LDAA TEMP
  818D 4C                INCA
  818E 97 02             STAA TEMP
  8190 DE 01             LDX TEMP_H
  8192 7E 81 A7          JMP MD3

                   MD

  8195 D6 12             LDAB C
  8197 C1 30             CMPB #$30
  8199 27 03             BEQ MD2
  819B BD 83 C3          JSR FORMATOCENTENA

                   MD2

  819E D6 11             LDAB D
  81A0 C1 30             CMPB #$30
  81A2 27 03             BEQ MD3
  81A4 BD 83 80          JSR FORMATODECENA

                   MD3

  81A7 D6 10             LDAB U
  81A9 C1 30             CMPB #$30
  81AB 27 03             BEQ ESPERA_OK
  81AD BD 83 3D          JSR FORMATOUNIDAD

                   ESPERA_OK

  81B0 86 3F             LDAA #'?
  81B2 97 00             STAA ORDEN
                   CICLO_O
  81B4 96 00             LDAA ORDEN
  81B6 81 3F             CMPA #'?
  81B8 27 FA             BEQ  CICLO_O
  81BA 81 4F             CMPA #'O
  81BC 27 00             BEQ CICLO_K
                   CICLO_K
  81BE 96 00             LDAA ORDEN
  81C0 81 4B             CMPA #'K
  81C2 26 F0             BNE CICLO_O
  81C4 7E 80 06          JMP LIMPIA

                   IMPRIME_ERROR_MAX_DECIMAL_TEMP
  81C7 7E 80 EA          JMP IMPRIME_ERROR_MAX_DECIMAL
                   IMPRIME_ERROR_SIMBOLO_TEMP
  81CA 7E 80 E4          JMP IMPRIME_ERROR_SIMBOLO

                   *** Convierte decimal a romano ***
                   R2D

  81CD CE 01 70          LDX #$0170
  81D0 18 CE 00 00       LDY #0
  81D4 C6 00             LDAB #0
                   COPY_ROMANO
  81D6 A6 00             LDAA $0,X
  81D8 18 A7 80          STAA $80,Y
  81DB 08                INX
  81DC 5C                INCB
  81DD 18 08             INY
  81DF D1 02             CMPB TEMP
  ADDR B1 B2 B3 B4 C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE       6

  81E1 23 F3             BLS COPY_ROMANO
  81E3 18 09             DEY
  81E5 86 3D             LDAA #'=
  81E7 18 A7 80          STAA $80,Y
  81EA 7C 00 02          INC TEMP

  81ED CC 01 70          LDD #$0170
  81F0 D3 01             ADDD TEMP_H
  81F2 83 00 02          SUBD #2
  81F5 18 CE 00 00       LDY #0
  81F9 8F                XGDX
  81FA 7E 81 FD          JMP COMPARA_I

                   COMPARA_I
  81FD A6 00             LDAA $0,X
  81FF 81 49             CMPA #'I
  8201 26 10             BNE COMPARA_V
  8203 D6 2B             LDAB CONT_I
  8205 C1 03             CMPB #3
  8207 24 C1             BHS IMPRIME_ERROR_SIMBOLO_TEMP
  8209 7C 00 2B          INC CONT_I
  820C 7C 00 2C          INC U_R
  820F 09                DEX
  8210 7E 81 FD          JMP COMPARA_I
                   COMPARA_V
  8213 A6 00             LDAA $0,X
  8215 81 56             CMPA #'V
  8217 26 20             BNE COMPARA_X
  8219 D6 2C             LDAB U_R
  821B C1 03             CMPB #3
  821D 22 AB             BHI IMPRIME_ERROR_SIMBOLO_TEMP
  821F D6 2C             LDAB U_R
  8221 CB 05             ADDB #5
  8223 D7 2C             STAB U_R
  8225 09                DEX
  8226 A6 00             LDAA $0,X
  8228 81 49             CMPA #'I
  822A 26 0D             BNE COMPARA_X
  822C 7C 00 2B          INC CONT_I
  822F D6 2B             LDAB CONT_I
  8231 C1 01             CMPB #1
  8233 22 95             BHI IMPRIME_ERROR_SIMBOLO_TEMP
  8235 7A 00 2C          DEC U_R
  8238 09                DEX
                   COMPARA_X
  8239 A6 00             LDAA $0,X
  823B 81 58             CMPA #'X
  823D 26 31             BNE COMPARA_L
  823F D6 29             LDAB CONT_X
  8241 C1 03             CMPB #3
  8243 24 28             BHS IMPRIME_ERROR_SIMBOLO_TEMP_1
  8245 7C 00 29          INC CONT_X
  8248 7C 00 2D          INC D_R
  824B 09                DEX
  824C A6 00             LDAA $0,X
  824E 81 49             CMPA #'I
  8250 26 E7             BNE COMPARA_X
  8252 D6 29             LDAB CONT_X
  8254 C1 01             CMPB #1
  8256 26 15             BNE IMPRIME_ERROR_SIMBOLO_TEMP_1
  8258 D6 2C             LDAB U_R
  825A 26 11             BNE IMPRIME_ERROR_SIMBOLO_TEMP_1
  825C 7A 00 2D          DEC D_R
  825F 7A 00 29          DEC CONT_X
  8262 C6 09             LDAB #9
  ADDR B1 B2 B3 B4 C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE       7

  8264 D7 2C             STAB U_R
  8266 09                DEX
  8267 7E 82 39          JMP COMPARA_X

                   IMPRIME_ERROR_MAX_DECIMAL_TEMP_1
  826A 7E 81 C7          JMP IMPRIME_ERROR_MAX_DECIMAL_TEMP
                   IMPRIME_ERROR_SIMBOLO_TEMP_1
  826D 7E 81 CA          JMP IMPRIME_ERROR_SIMBOLO_TEMP

                   COMPARA_L
  8270 A6 00             LDAA $0,X
  8272 81 4C             CMPA #'L
  8274 26 20             BNE COMPARA_C
  8276 D6 2D             LDAB D_R
  8278 C1 03             CMPB #3
  827A 22 F1             BHI IMPRIME_ERROR_SIMBOLO_TEMP_1
  827C D6 2D             LDAB D_R
  827E CB 05             ADDB #5
  8280 D7 2D             STAB D_R
  8282 09                DEX
  8283 A6 00             LDAA $0,X
  8285 81 58             CMPA #'X
  8287 26 0D             BNE COMPARA_C
  8289 7C 00 29          INC CONT_X
  828C D6 29             LDAB CONT_X
  828E C1 01             CMPB #1
  8290 22 DB             BHI IMPRIME_ERROR_SIMBOLO_TEMP_1
  8292 7A 00 2D          DEC D_R
  8295 09                DEX
                   COMPARA_C
  8296 A6 00             LDAA $0,X
  8298 81 43             CMPA #'C
  829A 26 2B             BNE COMPARA_D
  829C D6 27             LDAB CONT_C
  829E C1 03             CMPB #3
  82A0 24 CB             BHS IMPRIME_ERROR_SIMBOLO_TEMP_1
  82A2 7C 00 27          INC CONT_C
  82A5 7C 00 2E          INC C_R
  82A8 09                DEX
  82A9 A6 00             LDAA $0,X
  82AB 81 58             CMPA #'X
  82AD 26 E7             BNE COMPARA_C
  82AF D6 27             LDAB CONT_C
  82B1 C1 01             CMPB #1
  82B3 26 B8             BNE IMPRIME_ERROR_SIMBOLO_TEMP_1
  82B5 D6 2D             LDAB D_R
  82B7 26 B4             BNE IMPRIME_ERROR_SIMBOLO_TEMP_1
  82B9 7A 00 2E          DEC C_R
  82BC 7A 00 29          DEC CONT_X
  82BF C6 09             LDAB #9
  82C1 D7 2D             STAB D_R
  82C3 09                DEX
  82C4 7E 82 96          JMP COMPARA_C
                   COMPARA_D
  82C7 A6 00             LDAA $0,X
  82C9 81 44             CMPA #'D
  82CB 26 20             BNE COMPARA_M
  82CD D6 2E             LDAB C_R
  82CF C1 03             CMPB #3
  82D1 22 9A             BHI IMPRIME_ERROR_SIMBOLO_TEMP_1
  82D3 D6 2E             LDAB C_R
  82D5 CB 05             ADDB #5
  82D7 D7 2E             STAB C_R
  82D9 09                DEX
  82DA A6 00             LDAA $0,X
  ADDR B1 B2 B3 B4 C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE       8

  82DC 81 43             CMPA #'C
  82DE 26 E7             BNE COMPARA_D
  82E0 7C 00 27          INC CONT_C
  82E3 D6 27             LDAB CONT_C
  82E5 C1 01             CMPB #1
  82E7 22 1A             BHI IMPRIME_ERROR_SIMBOLO_TEMP_2
  82E9 7A 00 2E          DEC C_R
  82EC 09                DEX
                   COMPARA_M
  82ED A6 00             LDAA $0,X
  82EF 81 4D             CMPA #'M
  82F1 26 13             BNE FIN_DE_COMPARA
  82F3 D6 25             LDAB CONT_M
  82F5 C1 09             CMPB #9
  82F7 24 0A             BHS IMPRIME_ERROR_SIMBOLO_TEMP_2
  82F9 7C 00 25          INC CONT_M
  82FC 7C 00 2F          INC UM_R
  82FF 09                DEX
  8300 7E 82 ED          JMP COMPARA_M
                   IMPRIME_ERROR_SIMBOLO_TEMP_2
  8303 7E 81 CA          JMP IMPRIME_ERROR_SIMBOLO_TEMP
                   FIN_DE_COMPARA
  8306 A6 00             LDAA $0,X
  8308 81 FF             CMPA #$FF
  830A 27 03             BEQ SALTA_CEROS
  830C 7E 83 03          JMP IMPRIME_ERROR_SIMBOLO_TEMP_2

                   SALTA_CEROS
  830F DE 01             LDX TEMP_H
  8311 D6 2F             LDAB UM_R
  8313 26 0A             BNE OUTPUT_ROMANO_M
  8315 D6 2E             LDAB C_R
  8317 26 0D             BNE OUTPUT_ROMANO_C
  8319 D6 2D             LDAB D_R
  831B 26 10             BNE OUTPUT_ROMANO_X
  831D 27 15             BEQ OUTPUT_ROMANO_I

                   OUTPUT_ROMANO_M
  831F D6 2F             LDAB UM_R
  8321 CB 30             ADDB #$30
  8323 E7 80             STAB $80,X
  8325 08                INX
                   OUTPUT_ROMANO_C
  8326 D6 2E             LDAB C_R
  8328 CB 30             ADDB #$30
  832A E7 80             STAB $80,X
  832C 08                INX
                   OUTPUT_ROMANO_X
  832D D6 2D             LDAB D_R
  832F CB 30             ADDB #$30
  8331 E7 80             STAB $80,X
  8333 08                INX
                   OUTPUT_ROMANO_I
  8334 D6 2C             LDAB U_R
  8336 CB 30             ADDB #$30
  8338 E7 80             STAB $80,X

                   SALTE_DE_OUTPUT_ROMANO
  833A 7E 81 B0          JMP ESPERA_OK
                   ***********************************
                   * Unidades
                   ***********************************

                   FORMATOUNIDAD

  ADDR B1 B2 B3 B4 C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE       9

  833D 96 10             LDAA U
  833F 81 34             CMPA #$34
  8341 27 32             BEQ USPECIAL
  8343 25 15             BLO UCICLO
  8345 81 39             CMPA #$39
  8347 27 04             BEQ USPECIAL9
  8349 81 35             CMPA #$35
  834B 24 1A             BHS USPECIAL5

                   USPECIAL9
  834D 86 49             LDAA #'I
  834F BD 84 B7          JSR DATARX
  8352 86 58             LDAA #'X
  8354 BD 84 B7          JSR DATARX
  8357 7E 83 7F          JMP FINU

                   UCICLO
  835A 86 49             LDAA #'I
  835C BD 84 B7          JSR DATARX
  835F 5A                DECB
  8360 C1 30             CMPB #$30
  8362 27 1B             BEQ FINU
  8364 7E 83 5A          JMP UCICLO

                   USPECIAL5
  8367 86 56             LDAA #'V
  8369 BD 84 B7          JSR DATARX
  836C C0 05             SUBB #5
  836E C1 30             CMPB #$30
  8370 22 E8             BHI UCICLO
  8372 7E 83 7F          JMP FINU

                   USPECIAL
  8375 86 49             LDAA #'I
  8377 BD 84 B7          JSR DATARX
  837A 86 56             LDAA #'V
  837C BD 84 B7          JSR DATARX

                   FINU
  837F 39                RTS

                   ***********************************
                   * Dencenas
                   ***********************************

                   FORMATODECENA

  8380 96 11             LDAA D
  8382 81 34             CMPA #$34
  8384 27 32             BEQ DSPECIAL
  8386 25 15             BLO DCICLO
  8388 81 39             CMPA #$39
  838A 27 04             BEQ DSPECIAL9
  838C 81 35             CMPA #$35
  838E 24 1A             BHS DSPECIAL5

                   DSPECIAL9
  8390 86 58             LDAA #'X
  8392 BD 84 B7          JSR DATARX
  8395 86 43             LDAA #'C
  8397 BD 84 B7          JSR DATARX
  839A 7E 83 C2          JMP FIND

                   DCICLO
  839D 86 58             LDAA #'X
  ADDR B1 B2 B3 B4 C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE      10

  839F BD 84 B7          JSR DATARX
  83A2 5A                DECB
  83A3 C1 30             CMPB #$30
  83A5 27 1B             BEQ FIND
  83A7 7E 83 9D          JMP DCICLO

                   DSPECIAL5
  83AA 86 4C             LDAA #'L
  83AC BD 84 B7          JSR DATARX
  83AF C0 05             SUBB #5
  83B1 C1 30             CMPB #$30
  83B3 22 E8             BHI DCICLO
  83B5 7E 83 C2          JMP FIND

                   DSPECIAL
  83B8 86 58             LDAA #'X
  83BA BD 84 B7          JSR DATARX
  83BD 86 4C             LDAA #'L
  83BF BD 84 B7          JSR DATARX

                   FIND
  83C2 39                RTS

                   ***********************************
                   * Centenas
                   ***********************************

                   FORMATOCENTENA

  83C3 96 12             LDAA C
  83C5 81 34             CMPA #$34
  83C7 27 32             BEQ CSPECIAL
  83C9 25 15             BLO CCICLO
  83CB 81 39             CMPA #$39
  83CD 27 04             BEQ CSPECIAL9
  83CF 81 35             CMPA #$35
  83D1 24 1A             BHS CSPECIAL5

                   CSPECIAL9
  83D3 86 43             LDAA #'C
  83D5 BD 84 B7          JSR DATARX
  83D8 86 4D             LDAA #'M
  83DA BD 84 B7          JSR DATARX
  83DD 7E 84 05          JMP FINC

                   CCICLO
  83E0 86 43             LDAA #'C
  83E2 BD 84 B7          JSR DATARX
  83E5 5A                DECB
  83E6 C1 30             CMPB #$30
  83E8 27 1B             BEQ FINC
  83EA 7E 83 E0          JMP CCICLO

                   CSPECIAL5
  83ED 86 44             LDAA #'D
  83EF BD 84 B7          JSR DATARX
  83F2 C0 05             SUBB #5
  83F4 C1 30             CMPB #$30
  83F6 22 E8             BHI CCICLO
  83F8 7E 84 05          JMP FINC

                   CSPECIAL
  83FB 86 43             LDAA #'C
  83FD BD 84 B7          JSR DATARX
  8400 86 44             LDAA #'D
  ADDR B1 B2 B3 B4 C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE      11

  8402 BD 84 B7          JSR DATARX

                   FINC
  8405 39                RTS

                   ***********************************
                   * SERIAL
                   ***********************************

                   SERIAL

  8406 86 00             LDAA  #$00    * CONFIG TODO EL PUERTO  A COMO ENTRADAS
  8408 B7 10 01          STAA  DDRA    * EL PUERTO A

  840B 86 FF             LDAA  #$FF    * CONFIG TODO EL PUERTO  G COMO SALIDAS
  840D B7 10 03          STAA  DDRG    * EL PUERTO G

  8410 86 00             LDAA  #$00    * SE PONE PUERTO G EN CEROS
  8412 B7 10 02          STAA  PORTG


  8415 CC 30 2C          LDD   #$302C  * CONFIGURA PUERTO SERIAL
  8418 B7 10 2B          STAA  BAUD    * BAUD  9600  para cristal de 8MHz
  841B F7 10 2D          STAB  SCCR2   * HABILITA  RX Y TX PERO INTERRUPCN SOLO
.                  RX
  841E 86 00             LDAA  #$00
  8420 B7 10 2C          STAA  SCCR1   * 8 BITS

  8423 86 FE             LDAA  #$FE    * CONFIG PUERTO D COMO SALIDAS (EXCEPTO
.                  PD0)
  8425 B7 10 09          STAA  DDRD    * SEA  ENABLE DEL DISPLAY  PD4  Y RS PD3


  8428 86 04             LDAA  #$04
  842A B7 10 3C          STAA  HPRIO

  842D 86 00             LDAA  #$00
  842F 06                TAP
  8430 39                RTS

                   ***********************************
                   *  Borra todo
                   ***********************************

                   BORRA_TODO
  8431 86 00             LDAA #0
  8433 A7 80             STAA $80,X
  8435 08                INX
  8436 8C 00 20          CPX #$20
  8439 26 F6             BNE BORRA_TODO
  843B CE 01 70          LDX #$0170
                   BORRA_TODO_2
  843E A7 00             STAA $0,X
  8440 08                INX
  8441 8C 01 9F          CPX #$019F
  8444 26 F8             BNE BORRA_TODO_2
  8446 CE 00 00          LDX #0

  8449 39                RTS

                   ***********************************
                   *  Error en numero maximo
                   ***********************************

                   MENSAJE_ERROR_MAX
  ADDR B1 B2 B3 B4 C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE      12

  844A CE 10 4F          LDX #MENSAJE_1
  844D 18 CE 00 00       LDY #0
                   CICLO_ERROR_MAX
  8451 A6 00             LDAA 0,X
  8453 81 26             CMPA #'&
  8455 27 09             BEQ SALTE_ERROR_MAX
  8457 08                INX
  8458 18 A7 80          STAA $80,Y
  845B 18 08             INY
  845D 7E 84 51          JMP CICLO_ERROR_MAX

                   SALTE_ERROR_MAX
  8460 39                RTS

                   ***********************************
                   *  Error por simbolo invalido
                   ***********************************

                   MENSAJE_ERROR_SIMBOLO
  8461 CE 10 67          LDX #MENSAJE_2
  8464 18 CE 00 00       LDY #0
                   CICLO_ERROR_SIMBOLO
  8468 A6 00             LDAA 0,X
  846A 81 26             CMPA #'&
  846C 27 09             BEQ SALTE_ERROR_SIMBOLO
  846E 08                INX
  846F 18 A7 80          STAA $80,Y
  8472 18 08             INY
  8474 7E 84 68          JMP CICLO_ERROR_SIMBOLO

                   SALTE_ERROR_SIMBOLO
  8477 39                RTS

                   ***********************************
                   *  Romano
                   ***********************************

                   ROMANO
  8478 81 49             CMPA #'I
  847A 27 1B             BEQ CONFIRMA_ROMANO
  847C 81 56             CMPA #'V
  847E 27 17             BEQ CONFIRMA_ROMANO
  8480 81 58             CMPA #'X
  8482 27 13             BEQ CONFIRMA_ROMANO
  8484 81 4C             CMPA #'L
  8486 27 0F             BEQ CONFIRMA_ROMANO
  8488 81 43             CMPA #'C
  848A 27 0B             BEQ CONFIRMA_ROMANO
  848C 81 44             CMPA #'D
  848E 27 07             BEQ CONFIRMA_ROMANO
  8490 81 4D             CMPA #'M
  8492 27 03             BEQ CONFIRMA_ROMANO
  8494 7E 84 9E          JMP ERROR_FORMA_ROMANO

                   CONFIRMA_ROMANO
  8497 C6 01             LDAB #1
  8499 D7 24             STAB FCR
  849B 7E 84 A2          JMP CORRECT_ROMANO

                   ERROR_FORMA_ROMANO
  849E C6 01             LDAB #1
  84A0 D7 22             STAB FER

                   CORRECT_ROMANO
  84A2 39                RTS
  ADDR B1 B2 B3 B4 C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE      13


                   ***********************************
                   *  Decimal
                   ***********************************

                   DECIMAL
  84A3 81 30             CMPA #$30
  84A5 25 0B             BLO ERROR_FORMA
  84A7 81 39             CMPA #$39
  84A9 22 07             BHI ERROR_FORMA
  84AB C6 01             LDAB #1
  84AD D7 23             STAB FCD
  84AF 7E 84 B6          JMP CORRECT_DECIMAL

                   ERROR_FORMA
  84B2 C6 01             LDAB #1
  84B4 D7 21             STAB FED

                   CORRECT_DECIMAL
  84B6 39                RTS

                   ***********************************
                   *  DESPLIEGUE DE DATOS
                   ***********************************

                   DATARX
  84B7 A7 80             STAA $80,X
  84B9 08                INX

  84BA 39                RTS

                   ***********************************
                   * ATENCION A INTERRUPCION SERIAL
                   ***********************************
                         ORG  $F100

  F100 36                PSHA

  F101 B6 10 2E          LDAA SCSR
  F104 B6 10 2F          LDAA SCDR
  F107 97 00             STAA ORDEN

  F109 32                PULA

  F10A 3B                RTI

                   ***********************************
                   * MENSAJE DE ERROR
                   ***********************************
                         ORG $104F
  104F 4E 55 6D 65 MENSAJE_1  FCC "NUmero fuera del limite&"
. 1053 72 6F 20 66
. 1057 75 35 72 61
. 105B 20 64 65 6C
. 105F 20 6C 69 32
. 1063 69 74 65 26
  1067 53 69 6D 62 MENSAJE_2  FCC "Simbolo invAlido&"
. 106B 6F 6C 6F 20
. 106F 69 6E 76 41
. 1073 6C 69 64 6F
. 1077 26

                   ***********************************
                   * VECTOR INTERRUPCION SERIAL
                   ***********************************
  ADDR B1 B2 B3 B4 C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE      14

                          ORG   $FFD6
  FFD6 F1 00              FCB   $F1,$00

                   ***********************************
                   *RESET
                   ***********************************
                          ORG    $FFFE
  FFFE 80 00       RESET  FCB    $80,$00
                   ***********************************
                          END

  Symbol Table 

  REVISA_21          80A3
  CSPECIAL5          83ED
  COMPARA_C          8296
  COMPARA_D          82C7
  C_R                002E
  TEMP_H             0001
  CSPECIAL9          83D3
  DCICLO             839D
  COMPARA_I          81FD
  COMPARA_L          8270
  COMPARA_M          82ED
  ERROR_FORMA        84B2
  MENSAJE_ERROR_SIMBOLO 8461
  UM                 0013
  SERIAL             8406
  COMPARA_V          8213
  COMPARA_X          8239
  UMCICLO            812E
  DECIMAL            84A3
  FIN_DE_COMPARA     8306
  IMPRIME_ERROR_SIMBOLO_TEMP_1 826D
  IMPRIME_ERROR_SIMBOLO_TEMP_2 8303
  RELOAD_DATA_ROMANO 807D
  DSPECIAL5          83AA
  DSPECIAL9          8390
  C                  0012
  D                  0011
  ESPERA_OK          81B0
  R2D                81CD
  U                  0010
  CSCTL              105D
  MENSAJE_ERROR_MAX  844A
  UM_R               002F
  CICLO_ERROR_MAX    8451
  MENSAJE_1          104F
  MENSAJE_2          1067
  IMPRIME_ERROR_SIMBOLO 80E4
  IMPRIME_ERROR_MAX_DECIMAL 80EA
  CORRECT_DECIMAL    84B6
  SCCR1              102C
  SCCR2              102D
  CCICLO             83E0
  USPECIAL           8375
  TEMP               0002
  BAUD               102B
  LIMPIA             8006
  CICLO_GUARDADO_ROMANO 8081
  STORE_ROMANO       8074
  FCD                0023
  CICLO              8059
  D_R                002D
  OUTPUT_ROMANO_C    8326
  Symbol Table     C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE      15

  OUTPUT_ROMANO_I    8334
  DSPECIAL           83B8
  FCR                0024
  SALTE_DE_OUTPUT_ROMANO 833A
  OUTPUT_ROMANO_M    831F
  ROMANO             8478
  OUTPUT_ROMANO_X    832D
  UCICLO             835A
  OPT2               1038
  FED                0021
  CONFIRMA_ROMANO    8497
  BORRA_TODO         8431
  ACOMODA1           817E
  ACOMODA2           815E
  BORRA_TODO_2       843E
  ACOMODA3           813B
  FER                0022
  IMPRIME_ERROR_MAX_DECIMAL_TEMP 81C7
  COPY_ROMANO        81D6
  RESET              FFFE
  MD                 8195
  CICLO_K            81BE
  MD2                819E
  MD3                81A7
  CICLO_O            81B4
  ERROR_FORMA_ROMANO 849E
  RELOAD_DATA_DECIMAL 80BE
  FORMATOCENTENA     83C3
  ORDEN              0000
  IMPRIME_ERROR_MAX_DECIMAL_TEMP_1 826A
  HPRIO              103C
  CICLO_GUARDADO_DECIMAL 80C2
  SCSR               102E
  SALTE_ERROR_MAX    8460
  CORRECT_ROMANO     84A2
  FORMATODECENA      8380
  D2R                80FF
  STORE_DECIMAL      80B5
  IMPRIME_ERROR_SIMBOLO_TEMP 81CA
  U_R                002C
  PORTG              1002
  CONT               0020
  SALTA_CEROS        830F
  REVISA_CUATRO      80F0
  CONT_C             0027
  DDRA               1001
  CONT_D             0026
  DDRD               1009
  DATARX             84B7
  CONT_I             002B
  DDRG               1003
  CONT_L             0028
  CONT_M             0025
  SCDR               102F
  CONT_V             002A
  CONT_X             0029
  FINC               8405
  FIND               83C2
  CSPECIAL           83FB
  USPECIAL5          8367
  USPECIAL9          834D
  FINU               837F
  FORMATOUNIDAD      833D
  SALTE_ERROR_SIMBOLO 8477
  CICLO_ERROR_SIMBOLO 8468
  Symbol Table     C:\Users\Ian\Desktop\Proyecto2_Roma\Roma.asc     PAGE      16

  SPCR               1028
  R2D_TEMP           80B2
  INICIO             8055
